<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Great Lakes IceCast</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div>
        <p class="eyebrow">Great Lakes Operational Ice Forecast</p>
        <h1>Great Lakes IceCast</h1>
        <p class="subtitle">
          Three-day ice concentration outlook built from GLSEA concentration grids,
          NIC shapefiles, HRRR (AWS) forcing, GEBCO bathymetry, and buffered PHMSA
          shipping corridors.
        </p>
      </div>
      <div class="actions">
        <a class="button" href="../forecasts/submission_forecast_T0_to_T3.nc" download>
          Download NetCDF
        </a>
        <a class="button ghost" href="https://github.com/example/glic">
          Repository
        </a>
      </div>
    </header>

    <main>
      <section class="panel">
        <div class="controls">
          <div class="day-buttons">
            <button data-day="T0" class="active">T0 (Initial)</button>
            <button data-day="T1">T+1</button>
            <button data-day="T2">T+2</button>
            <button data-day="T3">T+3</button>
          </div>
          <div class="toggles">
            <label>
              <input type="checkbox" id="shippingToggle" checked /> Shipping routes
            </label>
            <label>
              <input type="checkbox" id="fastIceToggle" checked /> Fast-ice mask
            </label>
          </div>
        </div>
        <div class="map-wrapper">
          <img
            id="forecastImage"
            src="../forecasts/forecast_T0.png"
            alt="Ice concentration forecast"
          />
          <div id="shippingOverlay" class="overlay shipping" aria-hidden="true"></div>
          <div id="fastIceOverlay" class="overlay fast-ice" aria-hidden="true"></div>
        </div>
        <p class="placeholder-note">
          Replace the placeholder PNGs in <code>/forecasts</code> before sharing
          public updates. Only the shipping routes and fast-ice mask overlays
          render above the imagery.
        </p>
        <div class="narratives">
          <h2>Daily Narrative</h2>
          <p id="narrativeText"></p>
          <ul class="insights">
            <li id="shippingInsight"></li>
            <li id="fastIceInsight"></li>
            <li>Pack-ice flags derive from HRRR winds above threshold values.</li>
          </ul>
        </div>
      </section>

      <section class="panel">
        <div class="two-column">
          <div>
            <h3>Pipeline</h3>
            <p>
              GLSEA concentration and temperature grids, NIC shapefiles, and ASC
              land classes define the domain plus land/fast-ice mask. HRRR
              temperature, wind, and pressure fields from the AWS archive are
              remapped to the GLSEA grid, normalized with GEBCO bathymetry, and
              stacked with buffered shipping-route channels. Three historical
              states feed a residual U-Net that predicts the next three days via
              overlapping 256×256 tiles (stride 128) before mosaicking.
            </p>
          </div>
          <div>
            <h3>Model inputs & outputs</h3>
            <ul class="checklist">
              <li>Three-day GLSEA concentration + temperature history.</li>
              <li>NIC polygonal concentration flags for supervision.</li>
              <li>HRRR temperature, wind, and pressure drivers.</li>
              <li>Static GEBCO bathymetry and shoreline-fast mask.</li>
              <li>Buffered PHMSA corridor mask for sampling and overlays.</li>
            </ul>
            <p>
              Outputs include three future concentration slices (T+1..T+3) plus
              the derived overlays and NetCDF bundle served here.
            </p>
          </div>
        </div>
      </section>

      <section class="panel">
        <div class="two-column">
          <div>
            <h3>Masks & overlays</h3>
            <p>
              The dashboard only displays two overlays: shipping corridors
              derived from PHMSA NPMS shapefiles and the fast-ice/land mask
              derived from GLSEA+ASC rasters. Both use the toggles above to help
              highlight choke points and shoreline attachment zones.
            </p>
          </div>
          <div class="callout">
            <p>
              These same masks drive sampling bias during training, suppress land
              loss, and keep inference consistent with the NetCDF export. Replace
              the placeholder overlay rasters in <code>docs/</code> before
              publishing.
            </p>
          </div>
        </div>
      </section>

      <section class="panel data">
        <h3>Data Sources</h3>
        <div class="data-columns">
          <ul>
            <li><a href="https://www.natice.noaa.gov/products/icecharts/">NOAA NIC Ice Charts (shapefiles)</a></li>
            <li><a href="https://www.glerl.noaa.gov/emf/data/yyyy_glsea_ice/">NOAA GLERL GLSEA surface temperature & ice</a></li>
            <li><a href="https://registry.opendata.aws/noaa-hrrr-pds/">NOAA HRRR weather archive (AWS)</a></li>
            <li><a href="https://www.gebco.net/data_and_products/gridded_bathymetry_data/gebco_2023/">GEBCO 2023 Bathymetry Grid</a></li>
          </ul>
          <ul>
            <li><a href="https://www.npms.phmsa.dot.gov/CNWData.aspx">PHMSA NPMS shipping route shapefiles</a></li>
            <li>ASC ice concentration + land mask (NOAA GLERL)</li>
            <li>Optional GLISA + CoastWatch reference archives</li>
          </ul>
        </div>
      </section>

      <section class="panel">
        <h3>Future Improvements</h3>
        <ul class="checklist">
          <li>Blend Sentinel-1/RCM SAR texture metrics for ridge detection.</li>
          <li>Assimilate altimetry-derived thickness priors when available.</li>
          <li>Run lightweight ensembles to produce corridor-specific confidence bands.</li>
        </ul>
      </section>
    </main>

    <footer>
      <p>
        © 2024 Great Lakes IceCast. Data courtesy NOAA NIC, GLERL, HRRR, GEBCO.
        Not for real-world navigation.
      </p>
      <p>Contact: operations@icecast.dev · MIT License</p>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
