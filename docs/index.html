<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Great Lakes IceCast</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header>
      <div>
        <p class="eyebrow">Great Lakes Operational Ice Forecast</p>
        <h1>Great Lakes IceCast</h1>
        <p class="subtitle">
          Three-day ice concentration outlook generated from GLSEA ice grids,
          HRRR weather drivers, GEBCO bathymetry, and buffered shipping-route masks.
        </p>
      </div>
      <div class="actions">
        <a class="button" href="../forecasts/submission_forecast_T0_to_T3.nc" download>
          Download NetCDF
        </a>
        <a class="button ghost" href="https://github.com/example/glic">
          Repository
        </a>
      </div>
    </header>

    <main>
      <section class="panel">
        <div class="controls">
          <div class="day-buttons">
            <button data-day="T0" class="active">T0 (Initial)</button>
            <button data-day="T1">T+1</button>
            <button data-day="T2">T+2</button>
            <button data-day="T3">T+3</button>
          </div>
          <div class="toggles">
            <label>
              <input type="checkbox" id="shippingToggle" checked /> Shipping routes
            </label>
            <label>
              <input type="checkbox" id="fastIceToggle" checked /> Fast-ice mask
            </label>
          </div>
        </div>
        <div class="map-wrapper">
          <img
            id="forecastImage"
            src="../forecasts/forecast_T0.png"
            alt="Ice concentration forecast"
          />
          <div id="shippingOverlay" class="overlay shipping" aria-hidden="true"></div>
          <div id="fastIceOverlay" class="overlay fast-ice" aria-hidden="true"></div>
        </div>
        <p class="placeholder-note">
          Replace the placeholder PNGs in <code>/forecasts</code> before sharing
          public updates.
        </p>
        <div class="narratives">
          <h2>Daily Narrative</h2>
          <p id="narrativeText"></p>
          <ul class="insights">
            <li id="shippingInsight"></li>
            <li id="fastIceInsight"></li>
            <li>Pack-ice flags derive from HRRR winds above threshold values.</li>
          </ul>
        </div>
      </section>

      <section class="panel grid">
        <article>
          <h3>How it Works</h3>
          <p>
            GLSEA ice concentration grids define the analysis domain and land mask.
            HRRR air temperature, winds, and pressure fields plus GEBCO bathymetry
            are resampled onto the same grid, normalized, and stacked with buffered
            shipping-route masks. Three past days feed a 2D U-Net that predicts the
            next three days on overlapping patches (256 px tiles, stride 128).
          </p>
        </article>
        <article>
          <h3>Model Architecture</h3>
          <p>
            Encoder-decoder U-Net with residual skip connections and group
            normalization. Inputs contain stacked state, weather, and static
            channels; outputs return three future concentration slices. Land-masked
            loss weighting avoids penalizing terrestrial pixels. Checkpoints live
            under <code>checkpoints/</code>.
          </p>
        </article>
        <article>
          <h3>Operational Relevance</h3>
          <p>
            Outputs summarize expected choke points along the USCG corridors and
            highlight fast-ice attachment zones derived from shoreline buffers. NetCDF
            packages plus PNGs mirror the format used by the static dashboard.
          </p>
        </article>
      </section>

      <section class="panel mask">
        <div class="mask-copy">
          <h3>Mask coverage</h3>
          <p>
            The land mask (from GLSEA) counts 989,894 land pixels and 143,682 water
            pixels on the latest ingest. Buffered NOAA shipping routes flag 78,053
            pixels used for biased sampling and overlay generation.
          </p>
        </div>
        <div class="mask-image">
          <img src="mask_summary.svg" alt="Mask coverage summary" />
        </div>
      </section>

      <section class="panel data">
        <h3>Data Sources</h3>
        <div class="data-columns">
          <ul>
            <li>NOAA NIC Ice Charts (Shapefiles)</li>
            <li>NOAA GLERL GLSEA Surface Temperature & Ice</li>
            <li>NOAA HRRR weather archive (AWS)</li>
            <li>GEBCO 2023 Bathymetry Grid</li>
          </ul>
          <ul>
            <li>Shipping route shapefiles (competition dataset)</li>
            <li>ASC ice concentration + land mask (NOAA GLERL)</li>
            <li>Optional GLISA + CoastWatch reference archives</li>
          </ul>
        </div>
      </section>

      <section class="panel">
        <h3>Methodology Notes</h3>
        <ul class="highlights">
          <li>Unified grid reprojection and normalization.</li>
          <li>Overlapping patch inference (stride 128).</li>
          <li>Land-masked loss to avoid coastal artifacts.</li>
          <li>Fast-ice tagging via shoreline buffers.</li>
        </ul>
      </section>
    </main>

    <footer>
      <p>
        © 2024 Great Lakes IceCast. Data courtesy NOAA NIC, GLERL, HRRR, GEBCO.
        Not for real-world navigation.
      </p>
      <p>Contact: operations@icecast.dev · MIT License</p>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
